//Generated by wsdl2apex

public class VatService {
    
    public class Registration {
        public String Address;
        public String ErrorMessage;
        public String Name;
        public String VatNumber;
        private String[] Address_type_info = new String[]{'Address','http://schemas.datacontract.org/2004/07/Viad.Services.Public.GES.v1.DataContracts',null,'0','1','true'};
            private String[] ErrorMessage_type_info = new String[]{'ErrorMessage','http://schemas.datacontract.org/2004/07/Viad.Services.Public.GES.v1.DataContracts',null,'0','1','true'};
                private String[] Name_type_info = new String[]{'Name','http://schemas.datacontract.org/2004/07/Viad.Services.Public.GES.v1.DataContracts',null,'0','1','true'};
                    private String[] VatNumber_type_info = new String[]{'VatNumber','http://schemas.datacontract.org/2004/07/Viad.Services.Public.GES.v1.DataContracts',null,'0','1','true'};
                        private String[] apex_schema_type_info = new String[]{'http://schemas.datacontract.org/2004/07/Viad.Services.Public.GES.v1.DataContracts','true','false'};
                            private String[] field_order_type_info = new String[]{'Address','ErrorMessage','Name','VatNumber'};
                                }
    
    public class CheckVATRegistrationResponse_element {
        public VatService.Registration CheckVATRegistrationResult;
        private String[] CheckVATRegistrationResult_type_info = new String[]{'CheckVATRegistrationResult','www.viad.com/v1',null,'0','1','true'};
            private String[] apex_schema_type_info = new String[]{'www.viad.com/v1','true','false'};
                private String[] field_order_type_info = new String[]{'CheckVATRegistrationResult'};
                    }
    
    public class CheckVATRegistration_element {
        public String applicationSessionId;
        public String countryCode;
        public String vatRegistrationNumber;
        private String[] applicationSessionId_type_info = new String[]{'applicationSessionId','www.viad.com/v1',null,'0','1','true'};
            private String[] countryCode_type_info = new String[]{'countryCode','www.viad.com/v1',null,'0','1','true'};
                private String[] vatRegistrationNumber_type_info = new String[]{'vatRegistrationNumber','www.viad.com/v1',null,'0','1','true'};
                    private String[] apex_schema_type_info = new String[]{'www.viad.com/v1','true','false'};
                        private String[] field_order_type_info = new String[]{'applicationSessionId','countryCode','vatRegistrationNumber'};
                            }
    
    public with sharing class BasicHttpBinding_IVATService {
        public String endpoint_x = SOPService__c.getInstance('VatServiceEndpoint').URL__c;
        public Map<String,String> inputHttpHeaders_x;
        public Map<String,String> outputHttpHeaders_x;
        public String clientCertName_x;
        public String clientCert_x;
        public String clientCertPasswd_x;
        public Integer timeout_x;
        private String[] ns_map_type_info = new String[]{'http://schemas.datacontract.org/2004/07/Viad.Services.Public.GES.v1.DataContracts', 'VatService', 'http://schemas.microsoft.com/2003/10/Serialization/Arrays', 'VatService', 'www.viad.com', 'VatService', 'http://schemas.microsoft.com/2003/10/Serialization/', 'VatService', 'www.viad.com/v1', 'VatService'};
            
            public VatService.Registration CheckVATRegistration(String applicationSessionId,String countryCode,String vatRegistrationNumber) {
                VatService.CheckVATRegistration_element request_x = new VatService.CheckVATRegistration_element();
                request_x.applicationSessionId = applicationSessionId;
                request_x.countryCode = countryCode;
                request_x.vatRegistrationNumber = vatRegistrationNumber;
                VatService.CheckVATRegistrationResponse_element response_x;
                Map<String, VatService.CheckVATRegistrationResponse_element> response_map_x = new Map<String, VatService.CheckVATRegistrationResponse_element>();
                response_map_x.put('response_x', response_x);
                if(!test.isRunningTest()){
                    WebServiceCallout.invoke(this, request_x, response_map_x, new String[]{endpoint_x,'www.viad.com/v1/IVATService/CheckVATRegistration', 'www.viad.com/v1', 'CheckVATRegistration', 'www.viad.com/v1', 'CheckVATRegistrationResponse', 'VatService.CheckVATRegistrationResponse_element'} );
                }
                response_x = response_map_x.get('response_x');
                return response_x.CheckVATRegistrationResult;
            }
    }
    
    //#394590 New API call for only GB Vat country code - 04-04-2024
    public String CheckVATRegistrationForUk(String vatRegistrationNumber) {
        String endpoint = System.Label.VatServiceEndpointForUk+'/organisations/vat/check-vat-number/lookup/'+vatRegistrationNumber;
        HttpRequest req= new HttpRequest();
        Http http = new Http();
        req.setEndpoint(endpoint);
        req.setMethod('GET');
        if(!test.isRunningTest()){
            HttpResponse res = http.send(req);
            return res.getBody();
        }else return '{"target":{"address":{"line1":"Test"}}}';
    }
    
    public String CheckVATRegistration(String countryCode,String vatNumber) {
        String endpoint = System.Label.VatServiceEndpoint;
        HttpRequest req= new HttpRequest();
        Http http = new Http();
        req.setEndpoint(endpoint);
        req.setMethod('POST');
        req.setHeader('Content-Type', 'application/json');
        Map<String, String> requestBody = new Map<String, String>();
        requestBody.put('countryCode', countryCode);
        requestBody.put('vatNumber', vatNumber);
        String jsonBody = JSON.serialize(requestBody);
        req.setBody(jsonBody);
        if(!test.isRunningTest()){
            HttpResponse res = http.send(req);
            return res.getBody();
        }else return '{"name":"TestName","address":"Test Address","valid":true}';
    }
}